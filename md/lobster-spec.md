# 仕様検討

- [x] ヘッダーの記法
- [x] フッターの記法
- [ ] サイレントテーブルの記法
- [ ] レスポンシブデザイン対応
- [ ] ダークモード対応

## 基本仕様

- 基本的には前方一致で解釈していく
- HTMLはプレーンテキストとして扱う
  - Markdown記法で細かい設定もできるようにする
- 同じ記述があった場合、後者で上書きされる
- 行末のスペースは基本的にトリムする

## それぞれの要素の依存関係

🚧 表を書きます。🚧

## 見出し（Headings）

- 連続する`#`に続くテキストを見出し扱いする
- `#`とテキストの間には1つ以上の空白が必要
- テキストは改行するまでひとまとまりとする
  - 間にスペースがあっても別のMadkdown記法があっても内包する
  - テキスト中に`#`があってもプレーンテキストとして扱う
- 見出しは`#`１つから`#`６つまで対応する
  - それぞれ`<p>`タグで独自にクラスを割り当てる
- 行末についているn個の`#`は無視していい
  - この場合、`#`の前にスペースが１つ以上ある必要がある

## 段落（Paragraph）

- １つ以上の空行を境に段落を構成する
- 段落には`<p>`タグを用いる

## 改行（Newlines）

- 行末にスペースが２つあっても改行扱いはしない
- 単純に行末で改行してあれば`<br>`タグを入れる
  - ただしその段落の最後の改行の場合は例外として`<br>`タグに置き換えない

## テキストの修飾（Text Decorations）

### 強調 - 斜体（Emphasis - Italic）

- `*`または`_`のペアで挟まれたテキストを斜体にする
  - `*テキスト_`のような場合は認識しない
  - `**テキスト*`のような場合は「`*`と`*テキスト*`」のように認識する
  - テキストの間にスペースが入ることは許され得るが改行は許されない
  - テキストは他のMarkdown記法やHTMLタグが存在してもプレーンテキストとして扱う
- `<span>`タグを用いて独自にクラスを割り当てる

### 強勢 - 太字（Strong Emphasis - Bold）

- `**`または`__`のペアで挟まれたテキストを太字にする
  - `**テキスト__`のような場合は認識しない
  - `***テキスト***`のような場合は「`*`と`**テキスト**`と`*`」のように認識する
  - テキストの間にスペースが入ることは許され得るが改行は許されない
  - テキストは他のMarkdown記法やHTMLタグが存在してもプレーンテキストとして扱う
- `<span>`タグを用いて独自にクラスを割り当てる

## 打ち消し線（Strikethrough）

- `~~`のペアで挟まれたテキストに打ち消し線をつける
  - `~~~`や`~~~~`のように複数のチルダを使っている場合は一番内側のペアのみを認識する
  - テキストの間にスペースが入ることは許され得るが改行は許されない
  - テキストは他のMarkdown記法やHTMLタグが存在してもプレーンテキストとして扱う
- `<span>`タグを用いて独自にクラスを割り当てる

## 水平線（Horizontal Rules）

- 連続して３つ以上の`-`または`*`が並んでいるとき水平線を設ける
  - `--**`のように混ざっている場合は認識しない
  - `- - -`のように間にスペースが入っている場合も水平線と見做す
- 水平線`<hr>`タグを用いる

## コードスパン（Code Spans）

- `` ` ``のペアで挟まれたテキストをインラインのコードとして表示する
  - テキストの間にスペースが入ることは許され得るが改行は許されない
  - テキストは他のMarkdown記法やHTMLタグが存在してもプレーンテキスト（コード）として扱う
- コードスパンの中でバッククォートを使いたい場合は
  ~~~
  `` `hello` ``
  ~~~
  のように中で使うバッククォートの数＋１で囲う（中身の前後のスペースは必須）
- コードスパンには`<code>`タグを用いる

## コードブロック（Code Blocks）

- ```` ``` ````または`~~~`のペアで挟まれた複数行のテキストをコードブロックとして表示する
  - テキストは他のMarkdown記法やHTMLタグが存在してもプレーンテキスト（コード）として扱う
  - 改行はそのまま改行として表示する
- コードブロックにシンタックスハイライトを適用したい場合は
  ~~~
  ```js
  console.log("Hello");
  ```
  ~~~
  のように```` ``` ````の後ろに言語を指定する（Zenn同様`Prism.js`を使う？）
- コードブロックにファイル名を表示したい場合は
  ~~~
  ```js:script.js
  console.log("Hello");
  ```
  ~~~
  のように言語の後ろに`:ファイル名`と指定する（言語はなくてもいい）
- コードブロックには`<pre>`タグと`<code>`タグを用いる

## 引用（Blockquotes）

- `>`から始まるテキストは引用として表示する
  - テキストは改行しても空行を挟むまでは一つの段落として扱う
  - あるいは、連続して`>`から始まる複数行のテキストは空行を挟むまでは一つの段落として扱う
- `>`とテキストの間にスペースがある必要はない
- `>`の後に`>`をさらにつけることで二重引用ができる
  - 同様に`>`を付け加えることで多重引用ができる
- 引用には`<blockquote>`タグと`<p>`タグを用いる
- 引用の中ではその他のMarkdown記法が利用できる

## リスト（List）

- ネストは偶数個のスペースで深さを表現する
  - 1つネストを深くするときににスペース2個なのか4個なのかということは決まりがない！
  - 一つ上のアイテムよりもスペースが多いかどうかネストするかどうかを決めている
- 先頭記号とテキストの間には1つ以上スペースがないといけない
- アイテムが空白行で区切られているとき、テキストを`<p>`タグでラップする
- リストのテキストが始まるまでの文字数と同じだけのスペースを前におけば、改行しても段落をキープしてアイテマイズできる
  - 空行を挟んでもこの条件は変わらない
  - 空行を挟んだ後、リストのテキストが始まるまでの文字数よりも少ないスペースが前にある状態で新規にテキストが存在する場合はアイテマイズの段落外と認識する

### 順序なしリスト（Bullet List）

- `-` `*` `+`のいずれかを先頭記号とする
- 順序なしリストには`<ul>`タグと`<li>`タグを用いる
- ネストの深さは`<ul>`タグにつける独自クラスで判別できるようにする

### 番号付きリスト（Ordered List）

- `数字.`を先頭記号とする
- 番号付きリストには`<ol>`タグと`<li>`タグを用いる
- ネストの深さは`<ol>`タグにつける独自クラスで判別できるようにする
- `数字\.`となっていた場合は番号付きリストとしては扱わずにプレーンテキストとする

### チェックリスト（Check List）

- `- [ ]` `- [x]` `- [X]` `数字. [ ]` `数字. [x]` `数字. [X]`のいずれかを先頭記号とする
- `-`と`[`の間、あるいは`数字.`と`[`の間には1つ以上スペースがないといけない
- チェックリストには`<ul>`タグと`<li>`タグと`<input type="checkbox">`の組み合わせ、または`<ol>`タグと`<li>`タグと`<input type="checkbox">`の組み合わせを用いる
- ネストの深さは`<ul>`タグまたは`<ol>`タグにつける独自クラスで判別できるようにする

## テーブル（Table）

- 行頭と行末の`|`はなくてもパースはできる
- テーブルには`<table>`タグ、`<thead>`タグ、`<tbody>`タグ、`<tr>`タグ、`<th>`タグ、`<td>`タグを用いる

### ヘッダー（header）

- `| テキスト | テキスト |`のように`|`でカラム数とヘッダーの文字列を指定する
  - `テキスト`の前後にはスペースがあっていい
  - `テキスト`の中にはスペースが含まれていていい

### 整列（alignment）

- 特に寄せる方向を指定しない場合（HTML全体の`text-align`に従う場合）
  - `| --- | --- |`のようにする
  - `-`の前後にはスペースがあってもいい
  - 連続する`-`の間にはスペースがあってはいけない
- 左寄せを指定する場合
  - `| :--- | :--- |`のようにする
  - `:-`の前後にはスペースがあってもいい
  - `:`は左端に一つ
  - `-`は複数あっていい
  - 連続する記号の間にはスペースがあってはいけない
- 中央寄せを指定する場合
  - `| :---: | :---: |`のようにする
  - `:-:`の前後にはスペースがあってもいい
  - `:`は両端に一つずつ
  - `-`は複数あっていい
  - 連続する記号の間にはスペースがあってはいけない
- 右寄せを指定する場合
  - `| ---: | ---: |`のようにする
  - `-:`の前後にはスペースがあってもいい
  - `:`は右端に一つ
  - `-`は複数あっていい
  - 連続する記号の間にはスペースがあってはいけない

### アイテム（Item）

- アイテムのカラム数はヘッダーで定義したカラム数より足りなくても補完される
- 強調、強勢、打ち消し線、コードスパン、リンク、脚注が中で使える

## リンク（Link）

- `[テキスト][id]`と`[id]: URLやパス "タイトル"`のペアで機能する
  - `[テキスト]`と`[id]`の間にはスペースがあってもいい
  - `テキスト`の前後、`id`の前後にはスペースがあってもいい
  - `]`と`:`の間にはスペースを入れてはいけない
  - `:`と`URLやパス`の間にはスペースがあってもいい
  - `テキスト`はなくてもパースはできる
  - `"タイトル"`はなくてもいい
  - `"タイトル"`は`'タイトル'`や`(タイトル)`と書いてもいい
    - `""`や`''`や`()`で囲われていないと機能しない
  - `"タイトル"`は改行して次の行に書いてあっても良い
- `[テキスト][id]` : `[id]: URLやパス "タイトル"` は N : 1 で機能する
  - 少なくても一つ以上ペアが存在しないといけない
- 暗黙的リンク名のショートカット
  - `[テキスト][]`と`[テキスト]: URLやパス "タイトル"`のペアでも機能する
  - `テキスト`が`id`の役割も担う
- リンクには`<p>`タグと`<a>`タグを用いる

### インラインリンク（Inline Link）

- `[テキスト](URLやパス "タイトル")`の形式で機能する
  - `]`と`(`の間にスペースがあってはいけない
  - `テキスト`の前後にはスペースがあってもいい
  - `URLやパス`の前後にはスペースがあってもいい
  - `"タイトル"`の前後にはスペースがあってもいい
  - `URLやパス`と`"タイトル"`の間にはスペースが必要
  - `テキスト`はなくてもパースはできる
  - `URLやパス`はなくてもパースはできる
  - `"タイトル"`はなくてもいい
  - `"タイトル"`は`'タイトル'`や`(タイトル)`と書いてもいい
    - `""`や`''`や`()`で囲われていないと機能しない
- リンクの方がインラインリンクよりも優先されて処理される（前方一致で優先される）
- インラインリンクには`<p>`タグと`<a>`タグを用いる

## 脚注（Footnote）

- `[^id]`と`[^id]:テキスト`のペアで機能する
  - 記述される順番は関係ない
  - `[`と`^`と`id`と`]`の間にスペースを入れてはいけない
  - `]`と`:`の間にスペースを入れてはいけない
  - `:`と`テキスト`の間にはスペースがあってもいい
- `[^id]` : `[^id]:テキスト` は N : 1 で機能する
  - 少なくても一つ以上ペアが存在しないといけない
  - 一つ目は`[1]`、二つ目以降は`[1:N-1]`のように脚注表示される
- 同じ`id`の`[^id]:テキスト`が複数記述されている場合は後のものに上書きされる
- 脚注のリンクには上付き文字要素`<sup>`タグと`<a>`タグを用いる
- 脚注には`<p>`タグと`<a>`タグを用いる

### インライン脚注（Inline Footnote）

- `^[テキスト]`で機能する
  - `^`と`[`の間にはスペースを入れてはいけない
  - `テキスト`の前後にはスペースがあってもいい
- インライン脚注の方が脚注よりも優先されて処理される（前方一致で優先される）
- 脚注のリンクには上付き文字要素`<sup>`タグと`<a>`タグを用いる
- 脚注には`<p>`タグと`<a>`タグを用いる

## Lobster独自記法

### ヘッダー（Header）

- `:::header`と`:::`に挟まれた行をヘッダーとして扱う
- 中身にはヘッダー、フッター以外のMarkdown記法が使える
- ヘッダーは一つだけなので、複数記述がある場合は後のものに上書きされる
- ヘッダーには`<header>`タグを用いる
  - header内の標準のフォントサイズは大きめに

```
:::header
[Logo](/img/logo.png) Page Title
:::
```

### フッター（Footer）

- `:::footer`と`:::`に挟まれた行をフッターとして扱う
- 中身にはヘッダー、フッター以外のMarkdown記法が使える
- フッターは一つだけなので、複数記述がある場合は後のものに上書きされる
- ヘッダーには`<footer>`タグを用いる

```
:::footer
&copy; 2022 Sample Inc.
:::
```

### 詳細折りたたみ（Details）

- `:::details タイトル`と`:::`に挟まれた行を詳細折りたたみ要素として扱う
- 詳細折りたたみには`<details>`タグと`<summary>`タグを用いる

```
:::details Title
piyo piyo piyo
:::
```

### テーブル（Table）

#### セルの結合（Cell Merge）

- 水平方向のセル結合
  - `\|`のようにエスケープするとその前後のセルが結合する
  - `colspan`属性を`<th>`や`<td>`に付与する
- 垂直方向のセル結合
  - `\---`のようにアイテム内に記述すると上のセルと結合する
    - `-`は複数あってもいい
    - 連続する記号の間にはスペースがあってはいけない
  - `rowspan`属性を`<td>`に付与する

```
| header | header \|        | header |
| ------ | ------- | ------ | ------ |
| item   | item    | item   | item   |
| item   | item    | item   | item   |


| header | header | header | header |
| ------ | ------ | ------ | ------ |
| item   | item   | item  \|        |
| item   | item  \|       \|        |


| header | header | header | header |
| ------ | ------ | ------ | ------ |
| item   | item   | item   | itme   |
| \----- | \----- | item   | item   |
| item   | \----- | item   | item   |
```

#### サイレントテーブル（Silent Table）

- テーブルを書くときに`~ `を先頭行に書くとそのテーブルは枠線が表示されない

```
~ | header | header | header | header |
~ | ------ | :----- | :----: | :----: |
~ | item   | item   | item   | item   |
~ | item   | item   | item   | item   |
```

### ワープ（Warp）

- `:::warp ^id^`と`:::`に挟まれた行に書いてある内容を`^id^`というリンクが貼ってある場所に転記する
  - サイレントテーブルと組み合わせると段組ができる
  - `id`にはスペースが含まれていい

```
~ |    left     |    right     |
~ | ^left item^ | ^right item^ |

:::warp ^left item^
普通にMarkdownが書ける
:::

:::warp ^right item^
普通にMarkdownが書ける
:::
```

## 参考

- [HTMLリファレンス](https://www.tohoho-web.com/html/index.htm)

### 非推奨のタグ

- acronym
- applet
- basefont
- bgsound
- big
- blink
- center
- command
- comment
- dir
- font
- frame
- frameset
- ilayer
- isindex
- keygen
- layer
- listing
- marquee
- menuitem
- multicol
- nextid
- nobr
- noembed
- noframes
- nolayer
- plaintext
- rb
- rbc
- rtc
- s
- server
- spacer
- strike
- tt
- u
- xmp
